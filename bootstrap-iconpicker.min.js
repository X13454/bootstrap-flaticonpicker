+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),n=i.data("flaticonpicker"),o="object"==typeof t&&t;(n||"destroy"!=t)&&(n||i.data("flaticonpicker",n=new a(this,o)),"string"==typeof t&&n[t]())})}var a=function(e,t){this.init("flaticonpicker",e,t)};a.DEFAULTS={maxIconsPerPage:35,allCategoriesText:"All categories",iconSet:"glyphicon",template:'<div class="row" data-flaticonpicker-wrapper-selector><div class="col-xs-12 col-sm-7"><div class="row"><div data-flaticonpicker-iconcontainer class="col-xs-12"></div></div></div><div class="col-xs-12 col-sm-5"><div class="row"><div class="col-xs-12"><select style="margin-top: 4px; border-color: #ccc;" data-flaticonpicker-select size="10" class="form-control"></select></div></div><div class="row"><div class="col-xs-12"><ul class="pagination pagination-sm" data-flaticonpicker-pagination></ul></div></div></div></div>'},a.prototype.init=function(t,i,n){var o=this;if(o.type=t,o.$element=e(i),o.$element.hide(),o.options=e.extend({},a.DEFAULTS,n),o.$element.after(o.options.template),o.$wrapper=e("div[data-flaticonpicker-wrapper-selector] select[data-flaticonpicker-select]"),o.$select=e("div[data-flaticonpicker-wrapper-selector] select[data-flaticonpicker-select]"),o.iconContainerSelector="div[data-flaticonpicker-wrapper-selector] div[data-flaticonpicker-iconcontainer]",o.paginationSelector="div[data-flaticonpicker-wrapper-selector] ul[data-flaticonpicker-pagination]",o.$pagination=e(o.paginationSelector),o.$iconContainer=e(o.iconContainerSelector),o.fullIconList={},o.fullIconList[o.options.allCategoriesText]=[],!o.$element.find("optgroup").length)throw Error("The target <select> element does not contain any <optgroup>");o.$element.find("optgroup").each(function(){o.fullIconList[e(this).attr("label")]=[];var t=e(this);e(this).find("option").each(function(){o.fullIconList[o.options.allCategoriesText].push(e(this).text()),o.fullIconList[t.attr("label")].push(e(this).text())})});var c="";for(var r in o.fullIconList)o.fullIconList.hasOwnProperty(r)&&(c=c+"<option>"+r+"</option>");if(o.$select.append(c),o.$select.on("change",e.proxy(o.updateCategory,o)),o.currentCategory=o.options.allCategoriesText,o.$select.find("option:contains("+o.currentCategory+")").attr("selected","selected"),o.$element.find("option[selected=selected]").length){var l=o.$element.find("option[selected=selected]");o.currentIcon=l.text(),o.currentPage=Math.round(l.attr("value")/o.options.maxIconsPerPage+1)}else o.currentPage=1;o.allCommonSteps()},a.prototype.updateCategory=function(){var e=this;e.$select.find("option[selected=selected]").length&&e.$select.find("option[selected=selected]").removeAttr("selected"),e.currentCategory=e.$select.val(),e.currentPage=1,e.allCommonSteps()},a.prototype.updatePage=function(t){t.preventDefault();var a=this,i=e(t.target).closest("li").data("flaticonpicker-data-page");a.currentPage="next"==i?a.currentPage+1:"previous"==i?a.currentPage-1:i,a.allCommonSteps()},a.prototype.allCommonSteps=function(){var t=this;if(t.filteredIconsListLength=t.fullIconList[t.currentCategory].length,t.filteredIconList=[],t.filteredIconsListLength<=t.options.maxIconsPerPage)t.filteredIconList=t.fullIconList[t.currentCategory];else{var a=(t.currentPage-1)*t.options.maxIconsPerPage,i=Math.min(t.filteredIconsListLength,a+t.options.maxIconsPerPage);t.filteredIconList=t.fullIconList[t.currentCategory].slice(a,i)}t.$pagination.replaceWith(t.getPaginationHtml()),t.$pagination=e(t.paginationSelector),t.$pagination.find("li[data-flaticonpicker-data-page]").each(function(){e(this).on("click",e.proxy(t.updatePage,t))});for(var n='<div data-flaticonpicker-iconcontainer class="col-xs-12">',o=0;o<t.filteredIconList.length;o++){var c=t.currentIcon==t.filteredIconList[o]?" active":"";n=n+'<button style="margin: 4px" type="button" class="btn btn-default'+c+'" data-flaticonpicker-data-value="'+t.filteredIconList[o]+'"><i style="width: (18em / 14); text-align: center;" class="'+t.options.iconSet+" "+t.filteredIconList[o]+'"></i></button>'}n+="</div>",t.$iconContainer.replaceWith(n),t.$iconContainer=e(t.iconContainerSelector),t.$iconContainer.find("button").on("click",function(){t.$iconContainer.find("button").each(function(){e(this).hasClass("active")&&e(this).removeClass("active")}),e(this).hasClass("active")||e(this).addClass("active"),t.currentIcon=e(this).data("flaticonpicker-data-value");var a=t.$element.find("option:contains("+t.currentIcon+")").attr("value");t.$element.val(a).change()})},a.prototype.getPaginationHtml=function(){var e=this,t='<ul class="pagination pagination-sm" data-flaticonpicker-pagination>';1==e.currentPage?t+='<li class="disabled"><span>&laquo;</a></span>':e.currentPage>=2&&(t+='<li data-flaticonpicker-data-page="previous"><a href="#">&laquo;</a></li>');var a=e.filteredIconsListLength/e.options.maxIconsPerPage;e.maxPage=Math.ceil(a);var i,n,o=e.currentPage-1,c=e.maxPage-e.currentPage,r=3,l=e.maxPage>=2*r?2*r:e.maxPage-1,s=o>r?r:o,p=c>r?r:c;if(l>s+p?o>r?(i=l-p,n=p):c>r&&(i=s,n=l-s):(i=s,n=p),e.currentPage>1){t+='<li data-flaticonpicker-data-page="1"><a href="#">1</a></li>';var d=e.currentPage-(i-1),f=e.currentPage-1;e.currentPage-i-1>=1&&(t+="<li><span>&middot;&middot;</span></li>",d+=1);for(var g=d;f>=g;g++)t=t+'<li data-flaticonpicker-data-page="'+g+'"><a href="#">'+g+"</a></li>"}if(t=t+'<li class="active"><span>'+e.currentPage+"</span></li>",e.currentPage<e.maxPage){var u=e.currentPage+1,v=e.currentPage+(n-1);e.maxPage-v>1&&(v-=1);for(var h=u;v>=h;h++)t=t+'<li data-flaticonpicker-data-page="'+h+'"><a href="#">'+h+"</a></li>";e.maxPage-v>1&&(t+="<li><span>&middot;&middot;</span></li>"),t=t+'<li data-flaticonpicker-data-page="'+e.maxPage+'"><a href="#">'+e.maxPage+"</a></li>"}return e.currentPage==e.maxPage?t+='<li class="disabled"><span>&raquo;</span></li>':e.currentPage<e.maxPage&&(t+='<li data-flaticonpicker-data-page="next"><a href="#">&raquo;</a></li>'),t+="</ul>"},a.prototype.destroy=function(){var e=this;e.$wrapper.remove(),e.$element.removeData(e.type),e.$element.show()},e.fn.flaticonpicker=t,e.fn.flaticonpicker.Constructor=a}(jQuery);